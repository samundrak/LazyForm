!function(){var t={required:"The :attribute field is required.",email:"The :attribute format is invalid.",def:"The :attribute attribute has errors.",min:{numeric:"The :attribute must be at least :min.",string:"The :attribute must be at least :min characters."},max:{numeric:"The :attribute must be less than :max.",string:"The :attribute must be less than :max characters."},size:{numeric:"The :attribute must be :size.",string:"The :attribute must be :size characters."},numeric:"The :attribute must be a number.",url:"The :attribute format is invalid."},e=function(t,e){this.rules=e,this.input=t,this.errors={},this.errorCount=0,this.check()};e.prototype={constructor:e,_createMessage:function(t,e){var r,i;if("string"==typeof t&&"object"==typeof e){r=t;for(i in e)e.hasOwnProperty(i)&&(r=r.replace(":"+i,e[i]))}else r=t.replace(/:attribute/,e);return r},check:function(){var e,r,i,n,s,a,u,o,h,c,f;for(e in this.input)if(this.input.hasOwnProperty(e)&&(r=this.input[e],this.rules.hasOwnProperty(e)))for(i=this.rules[e].split("|"),n=i.length,s=0;n>s;s++)if(a=i[s],f=[],a.indexOf(":")>=0&&(a=a.split(":")),a instanceof Array?(u=a[1],a=a[0],o=this.validate[a](r,u)):(u=null,o=this.validate[a](r)),!o){if(this.errors.hasOwnProperty(e)||(this.errors[e]=[]),t.hasOwnProperty(a))if(c=t[a],"object"==typeof c){switch(typeof r){case"number":c=c.numeric;break;case"string":c=c.string}f.attribute=e,f[a]=u,h=this._createMessage(c,f)}else h=this._createMessage(c,e);else c=t.def,h=this._createMessage(c,e);this.errors[e].push(h),this.errorCount++}},passes:function(){return 0===this.errorCount},fails:function(){return this.errorCount>0},first:function(t){return this.errors.hasOwnProperty(t)?this.errors[t][0]:null},validate:{required:function(t){var e=t.replace(/\s/g,"");return(e+"").length>0},size:function(t,e){return e=parseFloat(e),"number"==typeof t?t===e:t.length===e},min:function(t,e){return"number"==typeof t?t>=e:t.length>=e},max:function(t,e){return"number"==typeof t?e>=t:e>=t.length},email:function(t){var e=/\w+@\w{2,}\.\w{2,}/;return!!t.match(e)},numeric:function(t){var e=Number(t);return"number"==typeof e&&!isNaN(e)&&"boolean"!=typeof t},url:function(t){var e=/^https?:\/\/\S+/;return t.match(e)}}},e.register=function(e,r,i){this.prototype.validate[e]=r,"string"==typeof i&&(t[e]=i)},"undefined"!=typeof module&&"undefined"!=typeof require?module.exports=e:window.Validator=e}();
Array.prototype.insert=function(t,e){this.splice(t,0,e)};var Form=function(){function t(){var t=this;this.$replaceString="$input",this.$submitCallback=void 0,this.$name=void 0,this.$inputFieldsName=[],this.getForm=function(){return t.$form},this.getRawHTML=function(){return t.$container.innerHTML},this.$callback=void 0}return t.prototype.setFormOptions=function(t){this.$formOptions=t},t.prototype.setInputValue=function(t,e){-1!==this.$inputFieldsName.indexOf(t)&&(document.forms[this.$name][t].value=e)},t.prototype.getInputValue=function(t){return-1===this.$inputFieldsName.indexOf(t)?void console.warn("This key("+t+") is not available"):document.forms[this.$name][t].value},t.prototype.getAllInputDom=function(){var t=this,e=[];return this.$inputFieldsName.forEach(function(n){e.push(document.forms[t.$name][n])}),e},t.prototype.getInputDom=function(t){return-1===this.$inputFieldsName.indexOf(t)?void console.warn("This key("+t+") is not available"):document.forms[this.$name][t]},t.prototype.getAllInputValue=function(){var t=this,e={};return this.$inputFieldsName.forEach(function(n){e[n]=document.forms[t.$name][n].value}),e},t.prototype.getContainer=function(){return this.$container},t.prototype.create=function(t){if(!this.$formOptions)return void console.warn("Form options must be set, to set form options you can call set$formOptions method");var e=this.buildForm();this.placeTheForm(e),this.buildChilds(),this.attachEvents(),document.forms[this.$name].onsubmit=function(){return console.log("form submitted"),!1}},t.prototype.getValue=function(t){console.log()},t.prototype.placeTheForm=function(t){if(this.$formOptions.hasOwnProperty("container")){var e=this.$formOptions.container;if(e.startsWith(".")){var n=document.getElementsByClassName(e.substring(1,e.length));n.length&&(this.$container=n,n[0].appendChild(t))}else if(e.startsWith("#"))this.$container=document.getElementById(e.substring(1,e.length)),this.$container.appendChild(t);else{var n=document.getElementsByTagName(e);n.length&&(this.$container=n,n[0].appendChild(t))}}},t.prototype.createFields=function(t,e){var n,i=document.createElement(t);if(i.setAttribute("type","text"),this.$formOptions.fields.hasOwnProperty("common")){if(this.$formOptions.fields.common.attr)for(var r in this.$formOptions.fields.common.attr)i.setAttribute(r,this.$formOptions.fields.common.attr[r]);n=e.attr.hasOwnProperty("template")?e.attr.template:this.$formOptions.fields.common.hasOwnProperty("template")?this.$formOptions.fields.common.template:this.$replaceString}for(var r in e.attr)"name"===r&&this.$inputFieldsName.push(e.attr[r]),i.setAttribute(r,e.attr[r]);return{input:i,template:n}},t.prototype.createElements=function(t,e){var n=document.createElement("div");return e&&(n.style.display="none"),t.forEach(function(t){var i=document.createElement(t.element||"div");for(var r in t.attr)i.setAttribute(r,t.attr[r]);i.innerHTML=t.value||e||"",n.appendChild(i)}),n},t.prototype.buildChilds=function(){var t=this;if(this.$formOptions.hasOwnProperty("fields")&&this.$formOptions.fields.hasOwnProperty("fields")){var e,n=[];for(var i in this.$formOptions.fields.fields)switch(i){case"textarea":case"input":this.$formOptions.fields.fields[i].forEach(function(r){if(!Array.isArray(r.attr)){var o=document.createElement("temp"),a=t.createFields(i,r);r.before&&o.appendChild(t.createElements(r.before)),o.appendChild(a.input),t.$formOptions.fields.validationElement&&"submit"!=r.attr.type&&"Submit"!=r.attr.type&&o.appendChild(t.createElements([t.$formOptions.fields.validationElement],"This Field is required")),r.after&&o.appendChild(t.createElements(r.after));var s=a.template.replace(t.$replaceString,o.innerHTML);"submit"==r.attr.type||"Submit"===r.attr.type?e=s:n.push({index:r.rank||-1,data:s})}});break;case"select":this.$formOptions.fields.fields[i].forEach(function(e){var i=document.createElement("temp"),r=t.createFields("select",e);e.options.forEach(function(t){var e=document.createElement("option");for(var n in t.attr)e.setAttribute(n,t.attr[n]),e.innerHTML=t.text;r.input.appendChild(e)}),e.before&&i.appendChild(t.createElements(e.before)),i.appendChild(r.input),t.$formOptions.fields.validationElement&&i.appendChild(t.createElements([t.$formOptions.fields.validationElement],"This Field is required")),e.after&&i.appendChild(t.createElements(e.after));var o=r.template.replace(t.$replaceString,i.innerHTML);n.push({index:e.rank||-1,data:o})});break;case"checkbox":case"radio":this.$formOptions.fields.fields[i].forEach(function(e){var r=i;e.name&&t.$inputFieldsName.push(e.name);var o=document.createElement("temp");e.before&&o.appendChild(t.createElements(e.before)),e.fields.forEach(function(t){var n=(document.createElement("temp"),document.createElement("input"));n.setAttribute("type",r),e.name&&n.setAttribute("name",e.name||""),e["class"]&&n.setAttribute("class",e["class"]);for(var i in t)"text"!=i&&n.setAttribute(i,t[i]);if(o.appendChild(n),t.text){var a=document.createElement("span");a.innerHTML=t.text,o.appendChild(a)}else{var a=document.createElement("span");a.innerHTML=t.value,o.appendChild(a)}}),t.$formOptions.fields.validationElement&&o.appendChild(t.createElements([t.$formOptions.fields.validationElement],"This Field is required")),e.after&&o.appendChild(t.createElements(e.after));var a=e.template?e.template:t.$formOptions.fields.common.hasOwnProperty("template")?t.$formOptions.fields.common.template:t.$replaceString,s=a.replace(t.$replaceString,o.innerHTML);n.push({index:e.rank||-1,data:s})})}var r=Utils.sorter(n);this.$form.innerHTML="",Utils.reArrange(r).forEach(function(e){t.$form.innerHTML=t.$form.innerHTML+e.data}),this.$form.innerHTML=this.$form.innerHTML+e}},t.prototype.buildForm=function(){var t=document.createElement("Form");return t.onfocus=function(t){console.log(t)},void 0!==this.$formOptions?(this.$formOptions.hasOwnProperty("attribute")&&"object"==typeof this.$formOptions.attribute&&(this.setAttributes(this.$formOptions.attribute,t),this.$name=this.$formOptions.attribute.name||Date.now()),this.$form=t,t):void 0},t.prototype.setAttributes=function(t,e){for(var n in t)e.setAttribute(n,t[n])},t.prototype.attachListener=function(t){this.$inputFieldsName.forEach(function(e){return t.prototype[e]=new Object}),this.$callback=new t},t.prototype.observer=function(t){var e=[8,37,38,39,40,18,91,32,16,20,9,27];-1===e.indexOf(t.event.keyCode)&&this.$callback.__proto__.hasOwnProperty(t.emitter)&&this.$callback.__proto__[t.emitter].hasOwnProperty(t.eventType)&&this.$callback.__proto__[t.emitter][t.eventType]({input:t.emitter,value:t.value,form:t.form,event:t.event})},t.prototype.attachEvents=function(){var t=this,e=["onkeyup","onkeydown","onmouseover","onmousedown","onclick","onfocus","onmouseenter","onmouseleave","onmousemove","onmousewheel"],n=this;this.$inputFieldsName.forEach(function(i){e.forEach(function(e){document.forms[t.$name][i][e]=function(t){n.observer({eventType:e,emitter:i,form:n.$name,value:document.forms[n.$name][i].value,event:t})}})})},t}();
var Utils=function(){function n(){}return n.sorter=function(n){var e={};return n.forEach(function(i,r){i.index?e.hasOwnProperty("index_"+i.index)?e["index_"+i.index].push({index:i.index,data:i.data}):(e["index_"+i.index]=new Array,e["index_"+i.index].push({index:i.index,data:i.data})):(e["index_"+n.length+1]=new Array,e["index_"+n.length+1].push({index:i.index,data:i.data}))}),e},n.reArrange=function(n){var e=[];for(var i in n)e.push(n[i][0].index);e.sort();var r=[],d=!1;return e.forEach(function(e){-1!=e?n["index_"+e].forEach(function(n){r.push(n)}):d=!0}),d&&n["index_-1"].forEach(function(n){r.push(n)}),r},n}();